sap.ui.define(['sap/ui/core/Control'],function(Control){'use strict';return Control.extend("influenz.de.sample.util.webGL3dScene",{metadata:{properties:{webGLAntiAlias:{type:"boolean"},webGLAlpha:{type:"boolean"},height:{type:"string",defaultValue:"1280"},width:{type:"string",defaultValue:"720"},texturePath:{type:"string",defaultType:""},objFilePath:{type:"string",defaultType:""},webGLCameraPositionZ:{type:"string"},webGLCameraPositionX:{type:"string"},webGLCameraPositionY:{type:"string"}},events:{},"aggregations":{"objects":{"type":"influenz.de.sample.util.WebGL3dObject","multiple":true,"singularName":"object"}}},init:function init(){},renderer:{render:function render(rendererManager,control){var webGLCamera=new THREE.PerspectiveCamera(45,control.getWidth()/control.getHeight(),1,2000);var webGLAmbientLight=new THREE.AmbientLight(0x101030);var webGLDirectionalLight=new THREE.DirectionalLight(0xffeedd);var webGLScene=new THREE.Scene();var loadingManager=new THREE.LoadingManager();var imageLoader=new THREE.ImageLoader(loadingManager);var objLoader=new THREE.OBJLoader(loadingManager);var webGLRenderer=new THREE.WebGLRenderer();webGLDirectionalLight.position.set(0,0,1);webGLCamera.position.z=control.getWebGLCameraPositionZ();webGLCamera.position.y=control.getWebGLCameraPositionY();webGLCamera.position.x=control.getWebGLCameraPositionX();webGLScene.add(webGLAmbientLight);webGLScene.add(webGLDirectionalLight);rendererManager.write("<div");rendererManager.writeControlData(control);rendererManager.write(">");rendererManager.write("<ul");rendererManager.write(">");jQuery.each(control.getObjects(),function(x,object){rendererManager.renderControl(object);objLoader.load(object.getObjFilePath(),function(objfile){objfile.traverse(function(child){if(child instanceof THREE.Mesh){//child.material.map = webGLTexture;
}});//objfile.position.y = 0; 
//objfile.position.x = 0;
//objfile.position.z = 0;
webGLScene.add(objfile);animate();function animate(){var SPEED=0.01;//object.getAggregation("webGLDOM").rotation.y -= SPEED;
//object.getAggregation("webGLDOM").rotation.x -= SPEED * 0.7;
requestAnimationFrame(animate);webGLCamera.lookAt(webGLScene.position);webGLRenderer.render(webGLScene,webGLCamera);}});});//rendererManager.write("</ul>");
rendererManager.write("</div>");}},onAfterRendering:function onAfterRendering(event){}});});;