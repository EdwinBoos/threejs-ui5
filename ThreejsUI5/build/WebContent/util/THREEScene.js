sap.ui.define(["sap/ui/core/Control","sap/ui/core/HTML"],function(e,i){"use strict";return e.extend("influenz.de.threeui5.util.THREEScene",{metadata:{properties:{height:{defaultValue:1280,type:"int"},width:{defaultValue:720,type:"int"},antiAlias:{defaultValue:!0,type:"boolean"},alpha:{defaultValue:!0,type:"boolean"}},events:{nextFrame:{enablePreventDefault:!0}},aggregations:{objects:{type:"influenz.de.threeui5.util.THREEObject",multiple:!0,singularName:"object"},camera:{types:["influenz.de.threeui5.util.THREEPerspectiveCamera","influenz.de.threeui5.util.THREECubeCamera"],multiple:!1},directionalLight:{type:"influenz.de.threeui5.util.THREEDirectionalLight",multiple:!1},ambientLight:{type:"influenz.de.threeui5.util.THREEAmbientLight",multiple:!1}}},init:function(){},onBeforeRendering:function(){var i=this,e=new THREE.LoadingManager,n=new THREE.OBJLoader(e);this.scene=new THREE.Scene,this.webGLRenderer=new THREE.WebGLRenderer({antialias:this.getAntiAlias(),alpha:this.getAlpha()}),this.webGLRenderer.setSize(this.getWidth(),this.getHeight()),jQuery.each(this.getObjects(),function(e,t){return n.load(t.getObjFilePath(),function(e){e.position.x=t.getObjPositionX(),e.position.z=t.getObjPositionZ(),e.position.y=t.getObjPositionY(),i.getScene().add(e),i.getScene().add(i.getAggregation("directionalLight").getDirectionalLight()),i.getScene().add(i.getAggregation("ambientLight").getAmbientLight())})})},getScene:function(){return this.scene},getWebGLRenderer:function(){return this.webGLRenderer},_renderPerFrame:function(){var e=this.getScene(),t=this.getAggregation("camera").getCamera(),i=this.getWebGLRenderer();this.fireNextFrame(),t.lookAt(e.position),requestAnimationFrame(this._renderPerFrame.bind(this)),i.render(e,t)},renderer:{render:function(e,t){e.write("<div"),e.writeControlData(t),e.write(">"),e.write("<ul"),e.write(">"),e.renderControl(t.getAggregation("camera")),e.renderControl(t.getAggregation("ambientLight")),e.renderControl(t.getAggregation("directionalLight")),e.renderControl((new i).setDOMContent(t.getWebGLRenderer().domElement)),e.write("</div>"),t._renderPerFrame()}}})});